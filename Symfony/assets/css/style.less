/* ------------------------------------------------------------------------- */

// blues
@facebook_blue:#3B5998;
@text_steely_blue: #47B399;
@text_dusky_blue: #44789F;
@palid_blue: #E8F5FF;
@bright_blue: #1789e2;
@faded_blue: #5480A5;
@link_blue: #3D8B99;
@avatar_blue:#777;

// greens
@text_green: #0EB96E;
@bright_green: #17e243;
@palegreen: #BADDBC;
@awesome_green: #1D9F75;

// grays
@slate: #444;
@fadedwhite: #eee;
@menu_semi_grey: rgba(238,238,238,.95);
@menu_semi_white: rgba(255,255,255,.95);
@faint_grey:#fafafa;
@border_light_grey: #cecece;

// brick
@firebrick:#E64F48;

// reds
@dark_red:#973636;
@ugly_pink:#FFE9E9;

// socialism
@brand_facebook:#3b5998;
@brand_google:#dd4b39;
@brand_twitter:#55acee;
@brand_pinterest:#cb2028;
@brand_linkedin:#0977b6;
@brand_bookstash:@firebrick;
@brand_google_dark:#4285F4;

@fancy_font: 'Amatic SC', cursive;


// - Mix-ins -------------------------------------------------------------------
// https://github.com/dmitryf/elements/blob/master/elements.less */
// http://css3.bradshawenterprises.com/which-vendor-prefixes-are-needed/
.box-sizing(@args) {
    -moz-box-sizing: @args;
    box-sizing: @args;
}
.column-count(@args){
    -moz-column-count:@args;
    -webkit-column-count:@args;
    column-count:@args;
}
.border-radius(@args){
    border-radius: @args;
}
.box-shadow(@args) {
    box-shadow: @args;
}
.transition(@args){
    -webkit-transition: @args;
    transition: @args;
}
.transform-style(@args){
    -webkit-transform-style: @args;
    transform-style: @args;
}
.transform(@args){
    -webkit-transform: @args;
    transform: @args;
}
.noselect(){
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.filter(@args){
    -webkit-filter: @args;
    -moz-filter: @args;
    filter: @args;
}
.cursor-zoom-out{
    cursor:url('/img/zoomout.cur'), pointer;
    cursor:-webkit-zoom-out;
    cursor:zoom-out;
}
.perspective(@args){
    -webkit-perspective:(@args);
    perspective:(@args);
}
.bstsh-gradient(){
    background:
        -webkit-radial-gradient(65% 50%, ellipse cover,  rgba(255,255,255,.4) 0%, rgba(255,255,255,0) 100%),
        -webkit-linear-gradient(left,  rgba(255,255,255,.5) 0%, rgba(75,75,75,.5) 100%),
        -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(23,226,67,1)), color-stop(100%,rgba(23,137,226,1)));
    background:
        radial-gradient(ellipse at 65% 50%,  rgba(255,255,255,.4) 0%, rgba(255,255,255,0) 100%),
        linear-gradient(to right,  rgba(255,255,255,.5) 0%, rgba(75,75,75,.5) 100%),
        linear-gradient(to bottom,  rgba(23,226,67,1) 0%,rgba(23,137,226,1) 100%);
    background-attachment:fixed;
}
.bstsh-gradient-light(@percent){
    background:
        -webkit-linear-gradient(to bottom, fade(white,@percent) 0%, fade(white,@percent) 100%),
        -webkit-radial-gradient(65% 50%, ellipse cover,  rgba(255,255,255,.4) 0%, rgba(255,255,255,0) 100%),
        -webkit-linear-gradient(left,  rgba(255,255,255,.5) 0%, rgba(75,75,75,.5) 100%),
        -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(23,226,67,1)), color-stop(100%,rgba(23,137,226,1)));
    background:
        linear-gradient(to bottom, fade(white,@percent) 0%, fade(white,@percent) 100%),
        radial-gradient(ellipse at 65% 50%,  rgba(255,255,255,.4) 0%, rgba(255,255,255,0) 100%),
        linear-gradient(to right,  rgba(255,255,255,.5) 0%, rgba(75,75,75,.5) 100%),
        linear-gradient(to bottom,  rgba(23,226,67,1) 0%,rgba(23,137,226,1) 100%);
    background-attachment:fixed;
}
.white-text-shadow(){
    text-shadow: 2px 1px 2px white;
}
.slate-text-shadow(){
    text-shadow: 2px 1px 2px darken(@slate,10%);
}
.firebrick-text-shadow(){
    text-shadow: 2px 1px 2px darken(@firebrick,10%);
}
.firebrick-light-text-shadow(){
    text-shadow: 2px 1px 2px darken(@firebrick, 5%);
}


// - Basics -------------------------------------------------------------------
* {
    outline: 0;
    padding: 0;
    margin: 0;
    border: 0;
    font-family: 'Titillium Web', sans-serif;
}
body,html{
    height:100%;
}
.fauxa, a{
    text-decoration:none;
    color:@link_blue;
    font-family: 'Titillium Web', sans-serif;
}
.fauxa:hover, a:hover, .fauxa:active, a:active {
    text-decoration:underline;
}
label.magic{
    position:relative;
    line-height:20px;
    padding-left:.5em;
    .noselect();
}
input[type="radio"] + label.magic:before {
    position:absolute;
    display:inline-block;
    height:1em;
    width:1em;
    left:-1.3em;
    top:.2em;
    content:' ';
    margin:0;
    border: 2px solid #ddd;
    background-color:white;
    .transition(~'box-shadow .1s');
    .border-radius(1em;);
}
input[type="radio"] + label.magic:after {
    position:absolute;
    height:.5em;
    width:.5em;
    left:-.9em;
    top:.55em;
    content:' ';
    background-color:#777;
    .border-radius(10px);
    opacity:0;
    .transition(~'all .3s');
    .transform(~'scale(.1)');
}
input[type="radio"]:checked + label.magic:after {
    opacity:1;
    .transform(~'scale(1)');
}
input[type="radio"]:checked + label.magic{
    text-decoration:underline;
}
input[type="checkbox"] + label.magic:before {
    position:absolute;
    display:inline-block;
    height:1em;
    width:1em;
    left:-1.3em;
    top:.2em;
    content:' ';
    margin:0;
    border: 2px solid #777;
    background-color:white;
    .transition(~'box-shadow .1s');
    border-radius:2px;
}
input[type="checkbox"] + label.magic:after {
    position:absolute;
    height:20px;
    width:20px;
    left:-16px;
    top:1px;
    background-repeat:no-repeat;
    background-image:url('/img/checkmark.svg');
    content: ' ';
    opacity:0;
    .transition(~'all .1s');
}
input[type="checkbox"]:checked + label.magic:after {
    opacity:1;
}
input[type="checkbox"] + label.magic:hover{
    text-decoration:underline;
}
input.password{
    .transition(~"all 0.2s ease-in-out");
    line-height: 27px;
    font-size: 18px;
    font-family: 'Titillium Web', sans-serif;
    padding: 10px;
    margin: 10px;
    border-radius: 4px;
    width: 400px;
    color:darken(@firebrick, 40%);
    opacity:.8;
}
input.password:hover,
input.password:focus{
    opacity:1;
}

button.showpass{
    background-color: @firebrick;
    font-size: 24px;
    line-height: 47px;
    margin-right: 10px;
    width: 38px;
    i{
        display: inline-block;
        border-radius: 20px;
        height: 38px;
        width: 38px;
        line-height: 38px;
        color:#ddd;
    }
}
button.showpass:hover i{
    background-color:lighten(@firebrick, 10%);
}

input::-ms-clear,
input::-ms-reveal {
    display: none;
}

[contenteditable="true"] + div.countdown,
textarea + div.countdown{
    display:block;
    width:100%;
    height:1px;
    text-align:right;
    color:#666;
    font-size:10px;
    vertical-align:bottom;
    pointer-events:none;
    white-space:nowrap;
    -webkit-transform: translate(-18px, -30px);
    transform: translate(-18px, -30px);
    visibility:hidden;
}

button, input{
    cursor:pointer;
}
label{
    .noselect();
}
#infscr-loading{
    opacity:0;
}
.clickable{
    cursor:pointer;
}
.mute{
    opacity:.5;
}
.visible{
    visibility:visible!important;
}
.vert{
    height:100%;
    width:0;
}
body.noscroll{
    overflow:hidden;
}
.squashed{
    height:0!important;
    overflow:hidden!important;
    padding-top:0!important;
    padding-bottom:0!important;
    margin-top:0!important;
    margin-bottom:0!important;
    border-width:0!important;
    max-height:0!important;
}
.sqished{
    width:0!important;
    overflow:hidden;
}
.vert{
    display:inline-block;
    vertical-align:middle;
    height:100%;
    width:0;
}
.noanim{
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -o-transition: none !important;
  -ms-transition: none !important;
  transition: none !important;
}
.noselect{
    .noselect();
}
body{
    .bstsh-gradient();
}
.social{
    float:right;
    height:32px;
    margin-top:4px;
    margin-right:4px;
    button{
        background-color:transparent;
        i{
            .border-radius(16px);
            .transition(~"all .2s");
            color:white;
            font-size:20px;
            height:32px;
            width:32px;
            text-align:center;
            line-height:32px;
            opacity:.9;
        }
        i.fa-facebook{
            // facebook F seems off center in fontawesome
            .box-sizing(border-box);
            padding-right:3px;
            background-color:@brand_facebook;
        }
        i.fa-pinterest{
            background-color:@brand_pinterest;
        }
        i.fa-google-plus{
            background-color:@brand_google;
        }
        i.fa-twitter{
            background-color:@brand_twitter;
        }
    }
    button:hover{
        i{
            opacity:1;
        }
    }
}

// - progress -----------------------------------------------------------------
.progress{
    display:inline-block;
    height:50px;
    width:200px;
}
.progress > i{
    display:inline-block;
    height:100%;
    background-color:#666;
    border-radius:50%;
    width:25%;
}
@-webkit-keyframes pulsate {
    0% {-webkit-transform: scale(0.8); opacity: 0.5;}
    50% {-webkit-transform: scale(1); opacity: 1.0;}
    100% {-webkit-transform: scale(0.8); opacity: 0.5;}
}
@keyframes pulsate {
    0% {transform: scale(0.8); opacity: 0.0;}
    50% {opacity: 1.0;}
    100% {transform: scale(0.8); opacity: 0.0;}
}
@-webkit-keyframes fadeInOut {
    from { opacity: .4; }
    50% { opacity: .9; }
    to { opacity: .4; }
}
@keyframes fadeInOut {
    from { opacity: .4; }
    50% { opacity: .9; }
    to { opacity: .4; }
}
@-webkit-keyframes blowup{
   0% {opacity:0; transform: scale(1,1) }
   1% {opacity:1; transform: scale(1,1) }
   100% { opacity:0; transform: scale(3,3)}
}
@keyframes blowup{
   0% {opacity:0; transform: scale(1,1) }
   1% {opacity:1; transform: scale(1,1) }
   100% { opacity:0; transform: scale(3,3)}
}
@-webkit-keyframes blowdown{
   0% {opacity:0; transform: scale(3,3) }
   99% {opacity:1; transform: scale(1,1) }
   100% { opacity:0; transform: scale(1,1)}
}
@keyframes blowdown{
   0% {opacity:0; transform: scale(3,3) }
   99% {opacity:1; transform: scale(1,1) }
   100% { opacity:0; transform: scale(1,1)}
}

.progress > i:nth-of-type(1){
    -webkit-animation: pulsate 1s -1s ease-in-out infinite;
    animation: pulsate 1s -1s ease-in-out infinite;
}
.progress > i:nth-of-type(2){
    -webkit-animation: pulsate 1s -.75s ease-in-out infinite;
    animation: pulsate 1s -.75s ease-in-out infinite;
}
.progress > i:nth-of-type(3){
   -webkit-animation: pulsate 1s -.5s ease-in-out infinite;
   animation: pulsate 1s -.5s ease-in-out infinite;
}
.progress > i:nth-of-type(4){
   -webkit-animation: pulsate 1s -.25s ease-in-out infinite;
   animation: pulsate 1s -.25s ease-in-out infinite;
}
.autocomplete-holder{
    position:absolute;
    top:60px;
    left:250px;
    .autocomplete-suggestions{
        color:white;
        padding:20px 20px;;
        background-color:@slate;
        border-radius:4px;
        text-shadow: 2px 1px 2px darken(@slate, 10%);
        .autocomplete-suggestion{
            opacity:.7;
            padding: 0 0;
            span{
                display:inline-block;
                padding-left:40px;
                line-height:23px;
                padding: 10px 0 10px 35px;
                font-weight:bold;
                font-size:15px;
            }
            span:hover{
                text-decoration:underline;
            }
            span.book{
                background: url('/img/book-icon.svgz') no-repeat 0px 50%;
            }
            span.author{
                background: url('/img/author-icon.svgz') no-repeat 4px 50%;
            }
        }
        .autocomplete-suggestion:nth-of-type(odd){
            background-color:lighten(@slate, 3%);
        }
        .autocomplete-suggestion.autocomplete-selected{
            background-color:lighten(@slate, 10%);
            text-decoration:underline;
            opacity:1;
        }

    }
    .autocomplete-suggestions:before{
        content:' ';
        position:absolute;
        top:-10px;
        left:50px;
        width: 0;
        height: 0;
        border-left: 10px solid transparent;
        border-right: 10px solid transparent;
        border-bottom: 10px solid @slate;
        font-size: 0;
        line-height: 0;
    }
}

// - Auth/Anon ----------------------------------------------------------------
body[auth=anon]{
    .hide-on-anon{
        display:none;
    }
}
body[auth=auth] .trim .dropdowns .menu.user .shell{
    .local{
        overflow:hidden!important;
        padding-top:0!important;
        padding-bottom:0!important;
        margin-top:0!important;
        margin-bottom:0!important;
        border-width:0!important;
        max-height:0!important;
    }
}
body[auth=anon] .trim .dropdowns .menu.user .shell .profile{
    overflow:hidden!important;
    padding-top:0!important;
    padding-bottom:0!important;
    margin-top:0!important;
    margin-bottom:0!important;
    border-width:0!important;
    max-height:0!important;
}
// - Menus --------------------------------------------------------------------
.trim{
    .transition(~'opacity 0.2s linear, visibility 0.2s linear');
    .dropdowns{
        *{
            .noselect();
        }
        .menu{
            position:fixed;
            opacity:0;
            .transition(~'opacity .4s linear, top 0s linear .5s, transform .5s cubic-bezier(.5,-0.5,.5,1.5)');
            .uber{
                height:10px;
                margin-top:-10px;
                position:relative;
                .triangle{
                    width: 0px;
                    height: 0px;
                    border-style: solid;
                    border-width: 0 10px 10px 10px;
                    border-color: transparent transparent #ffffff transparent;
                }
            }
            .shell{
                overflow:hidden;
                .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.75));
                .border-radius(4px);
            }
        }
        //--- Category Menu -----
        .menu.categories{
            top:-480px;
            width:800px;
            .transform(~'translate(0,-480px)');
            text-align:middle;
            margin-left:180px;
            display:inline-block;
            .uber{
                .triangle{
                    border-color: transparent transparent fade(@slate, 99%) transparent;
                    margin-left:70px;
                }
            }
            .shell{
                position:relative;
                background-color:fade(@slate, 99%);
                padding:110px 40px 30px 40px;
                color:white;
                .head{
                    position:absolute;
                    top:0;
                    left:0;
                    right:0;
                    padding:20px 40px;
                    font-weight:bold;
                    font-size:30px;
                    background-color:lighten(@slate, 5%);
                    text-shadow: 2px 1px 2px darken(@slate, 10%);
                }
                ul{
                    list-style-type: none;
                    li{
                        width:33%;
                        display:inline-block;
                        a{
                            display:inline-block;
                            width:100%;
                            color:white;
                            font-weight:bold;
                            line-height:35px;
                            text-shadow: 2px 1px 2px darken(@slate, 10%);
                            opacity:.7;
                        }
                        a:nth-of-type(odd){
                        }
                        a:before{

                            -moz-osx-font-smoothing: grayscale;
                            -webkit-font-smoothing: antialiased;
                            display: inline-block;
                            font-style: normal;
                            font-variant: normal;
                            text-rendering: auto;
                            line-height: 1;

                            color:white;
                            display: inline-block;
                            font-weight:normal;
                            vertical-align: top;
                            height: 20px;
                            line-height: 20px;
                            content: "\f149";
                            font: normal normal normal 12px/1 'FontAwesome';
                            margin: 6px 1px 0 10px;
                            -webkit-transform: rotate(90deg) scaleY(-1);
                            transform: rotate(90deg) scaleY(-1);
                        }
                        a:hover{
                            opacity:1;
                            background-color:#555;
                        }
                    }
                    li:nth-of-type(odd){
                        a{
                            background-color:lighten(@slate, 3%);
                        }
                    }
                }
            }
        }
        //--- Info Menu -----
        .menu.info{
            top:-300px;
            .transform(~'translate(0,-300px)');
            right:50px;
            .uber{
                .triangle{
                    float:right;
                    margin-right:40px;
                    border-color: transparent transparent fade(@firebrick, 95%) transparent;
                }
            }
            .shell{
                background-color:fade(@firebrick, 95%);
                text-align:center;
                padding-top:63px;
                span{
                    display:block;
                    background-color:lighten(@firebrick, 5%);
                    .firebrick-light-text-shadow();
                    line-height:53px;
                    margin-top:9px;
                    a{
                        line-height:28px;
                        color:white;
                        font-weight:bold;
                        margin:10px;
                    }
                }
                span.logo{
                    font-family: @fancy_font;
                    line-height:110px;
                    .firebrick-text-shadow();
                    font-size:80px;
                    color:white;
                    display:block;
                    margin:0 80px;
                    background-color:transparent;
                }
                img{
                    margin-top:-35px;
                    width:150px;
                    height:150px;
                }
            }
        }

        //--- User Menu -----
        .menu.user{
            top:-480px;
            .transform(~'translate(0,-480px)');
            right:10px;
            color:white;
            .firebrick-text-shadow();
            .uber{
                .triangle{
                    float:right;
                    margin-right:40px;
                    border-color: transparent transparent fade(@firebrick, 99%) transparent;
                }
            }
            .shell{
                background-color:fade(@firebrick, 95%);
                .user-shell{
                    padding:30px 60px 20px 60px;
                    .top{
                        position:relative;
                        padding-left:140px;
                        padding-top:20px;
                        padding-right:40px;
                        min-height:112px;
                        font-size:20px;
                        b{
                            font-size:24px;
                        }
                        img{
                            position:absolute;
                            left:10px;
                            top:10px;
                            border:4px solid lighten(@firebrick, 20%);
                            border-radius:8px;
                            width:100px;
                            height:100px;
                        }
                    }
                    .middle{
                        max-height:180px;
                        .transition(~'max-height .2s linear');
                        overflow:hidden;
                        p{
                            display:block;
                            height:30px;
                        }
                    }
                    .password-reset{
                        padding-top:40px;
                        max-height:0px;
                        .transition(~'max-height .2s linear');
                        overflow:hidden;
                        form{
                            strong{
                                display:block;
                                padding-bottom:10px;
                                margin-left:30px;
                            }
                            .nag{
                                padding-left:30px;
                                max-height:0;
                                overflow:hidden;
                                .transition(~'max-height .2s linear');
                                i{
                                    margin-right:5px;
                                }
                            }
                            .nag.visible{
                                max-height:30px;
                            }
                            .progress{
                                display:block;
                                height:30px;
                                width:120px;
                                opacity:0;
                                margin-top:30px;
                                margin-left:155px;
                                i{
                                    background-color:white;
                                    display:none;
                                }
                            }
                            .progress.visible{
                                opacity:.4;
                                i{
                                    display:inline-block;
                                }
                            }
                            .control{
                                display:block;
                                padding-top:25px;
                                text-align:right;

                                button{
                                    vertical-align: top;
                                    height: 47px;
                                    width: 188px;
                                    margin: 0px 42px 0 20px;
                                    font-size: 20px;
                                    color: white;
                                }
                                button.cancel{
                                    background-color:transparent;
                                    margin-right:20px;
                                }
                                button.change{
                                    border-radius: 4px;
                                    font-size: 20px;
                                    background-color:lighten(@firebrick, 10%);
                                    text-shadow: 0px 0px 6px darken(@firebrick,10%);
                                    font-weight:bold;
                                }
                                button:hover{
                                    text-decoration: underline;
                                }
                                button.change:hover{
                                    text-decoration: underline;
                                    box-shadow: inset 0px 0px 8px rgba(255, 255, 255, 0.75);
                                }
                            }
                        }
                    }
                    .password-changed{
                        max-height:0px;
                        overflow:hidden;
                        .transition(~'max-height .2s linear');
                        text-align:center;
                        span{
                            display:block;
                            padding:20px 0;
                            padding-top:20px;
                            padding-bottom:60px;
                            font-size:22px;
                            font-weight:bold;
                        }
                        button.ok{
                            height: 47px;
                            width: 188px;
                            font-size: 20px;
                            color: white;
                            border-radius: 4px;
                            background-color:lighten(@firebrick, 10%);
                            text-shadow: 0px 0px 6px darken(@firebrick,10%);
                            font-weight:bold;
                        }
                        button.ok:hover{
                            text-decoration: underline;
                            box-shadow: inset 0px 0px 8px rgba(255, 255, 255, 0.75);
                        }
                    }
                    .bottom{
                        position:absolute;
                        height:53px;
                        width:100%;
                        bottom:0;
                        left:0;
                        .transition(~'height .2s linear');
                        overflow:hidden;
                        background-color:lighten(@firebrick, 5%);
                        border-bottom-right-radius: 4px;
                        border-bottom-left-radius: 4px;
                        text-align:center;
                        div{
                            width:30%;
                            height:53px;
                            line-height:53px;
                            margin:0;
                            display:inline-block;
                            padding:0;
                            button{
                                background:transparent;
                                color:white;
                                .firebrick-light-text-shadow();
                                font-weight:bold;
                                font-size:16px;
                            }
                            button:hover{
                                text-decoration:underline;
                            }
                        }
                    }
                }
                .user-shell[data-password-reset=reset]{
                    .middle{
                        max-height:0;
                    }
                    .password-reset{
                        max-height:350px;
                    }
                    .bottom{
                        height:0;
                    }
                }
                .user-shell[data-password-reset=complete]{
                    .password-changed{
                        max-height:200px;
                    }
                    .bottom, .middle{
                        height:0;
                    }
                }
                .user-shell[data-usertype=local]{
                }
                .user-shell[data-usertype=social]{
                    .bottom{
                        .password{
                            display:none;
                        }
                    }
                }
            }
        }
        .menu.show{
            .transition(~'opacity .4s linear, top 0s linear .5s, transform .5s cubic-bezier(.44,0,.4,1.36)');
            -webkit-transition-delay:0s;
            transition-delay:0s;
            .transform(~'translate(0,0)');
            opacity:1;
            top:60px;
        }
    }
}
body[hidetrim=hidetrim] .trim,
body[pagename=tos] .trim,
body[pagename=privacy] .trim,
body[pagename=about] .trim,
body[pagename=admin] .trim,
body[pagename=blog] .trim,
body[pagename=error] .trim,
body[pagename=reset] .trim,
body[pagename=welcome] .trim{
    opacity:0;
    visibility:hidden;
}
.menuwhitebox{
    position:fixed;
    height:100%;
    width:100%;
    top:0;
    left:0;
    background-color:fade(white, 10%);
    visibility:hidden;
    opacity:0;
    cursor:pointer;
    .transition(~"visibility 0s linear 0.2s, opacity 0.2s linear, tranform 0.2s ease");
}
.menuwhitebox.visible{
    visibility:visible;
    opacity:1;
    .transition(opacity 0.2s linear);
}

//- Topbar -------------------------------------------------------------------
.trim {
    .topbar{
        position:fixed;
        top:0;
        left:0;
        height:50px;
        width:100%;
        line-height:50px;
        .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.75));
        overflow:hidden;
        background-color:@slate;
        z-index:100;
        span.logo{
            display:inline-block;
            font-size:36px;
            font-weight:bold;
            a{
                width:160px;
                background-color:@firebrick;
                padding:0 28px 0 18px;
                color:white;
                display:inline-block;
                font-family: @fancy_font;
                text-shadow: 2px 1px 2px rgba(50, 50, 50, 1);
                line-height:54px;
                vertical-align:top;
                margin-right:20px;
            }
             a:hover, a:active{
                text-decoration:none;
                text-shadow: 2px 1px 2px rgba(20, 20, 20, 1);
            }
        }
        .menu{
            height:50px;
            min-width:50px;
            display:inline-block;
            vertical-align:top;
            text-align:center;
            cursor:pointer;
            .transition(.3s);
            vertical-align:top;
            overflow:hidden;
            *{
                .noselect();
            }
            .icon{
                height:50px;
                width:50px;
                text-align:center;
                display:inline-block;
                img{
                    padding-top:9px;
                    height:30px;
                }
                i{
                    color:white;
                    font-size:30px;
                    padding-top:10px;
                }
                .bstsh-user-avatar-30{
                    margin-top:9px;
                }
            }
            .label{
                height:50px;
                max-width:0px;
                display:inline-block;
                .transition(max-width .3s);
                color:white;
                font-size:17px;
                font-weight:bold;
                line-height:50px;
                vertical-align:top;
                span{
                    margin-right:15px;
                }
            }
        }
        .menu.search{
            div.query{
                display:inline-block;
                .box-sizing(border-box);
                max-width:0px;
                .transition(all 0.2s linear);
                vertical-align:top;
                form{
                    position:relative;
                    input{
                        .border-radius(3px);
                        padding:10px;
                        font-size:18px;
                        line-height:27px;
                        background-color:lighten(@slate, 10%);
                        color:white;
                        width:282px;
                        margin-left:-9px;
                        margin-right:3px;
                        visibility:hidden;
                        font-family: 'Titillium Web', sans-serif;
                        font-weight:bold;
                        -webkit-user-select: auto;
                        user-select: auto;
                    }
                    input[disabled=disabled]{
                        opacity:.8;
                    }
                }
                form[data-searching=searching]:after{
                    position:absolute;
                    right:20px;
                    top:0;
                    content: "\f110";
                    font: normal normal normal 24px/50px FontAwesome;
                    color:white;
                    -webkit-animation: fa-spin 2s infinite linear;
                    animation: fa-spin 2s infinite linear;
                }
            }
        }
        .menu.search.focused{
            div.query{
                display:inline-block;
                max-width:300px;
                input{
                    visibility:visible;
                }
            }
            .label{
                max-width:0;
                visibility:hidden;
            }
        }
        .menu:hover, .menu.focused{
            background-color:lighten(@slate, 10%);
            .label{
                max-width:100px;
            }
        }
        .right{
            float:right;
        }
    }
}
//- User Tabs-----------------------------------------------------------------
.trim {
    .user-tabs{
        position:fixed;
        bottom:-256px;
        left:0;
        height:256px;
        width:100%;
        .transition(.3s);
        border-bottom:4px solid @slate;
        // FIXME more compat gradients
        background: linear-gradient(to bottom, rgba(255,255,255,0) 0%,rgba(200,200,200,.6) 100%);
        .tabs{
            position:absolute;
            left:5px;
            top:-40px;
            height:40px;
            .tab{
                overflow:hidden;
                .noselect();
                display:inline-block;
                margin-left:10px;
                height:40px;
                line-height:40px;
                vertical-align:top;
                .transition(.3s);
                cursor:pointer;
                background-color:@slate;
                color:white;
                padding:0 15px 0 20px;
                font-size:13px;
                font-weight:bold;
                border-top-left-radius: 4px;
                border-top-right-radius: 4px;
                .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.55));
                .box-sizing(border-box);
                button{
                    font-weight:bold;
                    background-color:transparent;
                    color:white;
                }
                .count{
                    position:relative;
                    display:inline-block;
                    border-radius:20px;
                    background-color:lighten(@slate, 10%);
                    font-size:12px;
                    line-height:12px;
                    padding:4px;
                    margin-left:5px;
                    font-weight:normal;
                    text-align:center;
                    min-width:20px;
                    .transition(~'.4s background-color .3s');
                    .box-sizing(border-box);
                }
                .count.update{
                    background-color:@firebrick;
                    .transition(0s);
                }
                .count:before{
                    position:absolute;
                    height:100%;
                    width:100%;
                    left:-2px;
                    top:-2px;
                    border:2px solid white;
                    content:' ';
                    border-radius:20px;
                    opacity:0;
                }
                .count.blowup:before{
                    animation-name:blowup;
                    animation-duration:.5s;
                }
                .count.blowdown:before{
                    animation-name:blowdown;
                    animation-duration:.5s;
                }
            }
            .tab.hidden{
                width:0;
                padding:0;
                margin:0;
            }
            .tab.hide{
                padding:9px 10px 10px 10px;
                button{
                    vertical-align:top;
                    background-color:lighten(@slate, 10%);
                    height:25px;
                    width:25px;
                    border-radius:6px;
                    i{
                        font-size:20px;
                        line-height:25px;
                        vertical-align:top;
                    }
                }
            }
            .tab.hide:hover{
                button{
                    background-color:lighten(@slate, 20%);
                }
            }
            .tab[data-selected=selected],
            .tab:hover{
                background-color:lighten(@slate, 10%);
                .count{
                    background-color:lighten(@slate, 20%);
                }
            }
        }
        .minimal{
            display:none;
            opacity:0;
            position:absolute;
            top:-40px;
            right:0;
            width:0;
            .shell{
                width:45px;
                height:40px;
                .box-sizing(border-box);
                background-color:@slate;
                padding:9px 10px 10px 10px;
                border-top-right-radius: 4px;
                .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.55));
                button{
                    vertical-align:top;
                    background-color:lighten(@slate, 10%);
                    height:25px;
                    width:25px;
                    border-radius:6px;
                    color:white;
                    i{
                        font-size:20px;
                    }
                }
            }
            .shell:hover{
                background-color:lighten(@slate, 10%);
                button{
                    background-color:lighten(@slate, 20%);
                }
            }
        }
        .tabs-content{
            position:absolute;
            width:100%;
            height:270px;
            background-color:lighten(@slate, 10%);
            div.content{
                display:none;
            }
            div.content.visible{
                display:block;
            }
            div.content.anon-tease{
                height:100%;
                .anon-silo{
                    position:absolute;
                    top:40px;
                    left:70px;
                    height:140px;
                    width:140px;
                    border:8px dotted fade(white, 50%);
                    border-radius:20px;
                    background-image: url('/img/user.svg');
                    background-size:120px;
                    background-repeat: no-repeat;
                    background-position:center;
                    opacity:.5;
                    span{
                        position:absolute;
                        width:140px;
                        top:165px;
                        display:block;
                        text-align:center;
                        color:white;
                        font-weight:bold;
                        font-size:15px;
                        line-height:19px;
                    }
                }
                .persuader{
                    position:absolute;
                    top:8px;
                    bottom:16px;
                    right:8px;
                    left:300px;

                    background: white;
                    background:
                        radial-gradient(ellipse at 65% 50%,  rgba(255,255,255,.7) 0%, rgba(255,255,255,.25) 100%),
                        linear-gradient(to bottom, #267fc160, #7fbce060, #59C17360),
                        linear-gradient(to right,  rgba(255,255,255,.5) 0%, rgba(75,75,75,.5) 100%),
                        linear-gradient(to bottom, fade(white,80%) 0%, fade(white,80%) 100%);

                    border-radius:4px;
                    span.message{
                        text-shadow: 2px 1px 2px white;
                        display:inline-block;
                        width:100%;
                        font-family: @fancy_font;
                        margin-top:40px;
                        text-align:center;
                        font-size:38px;
                        font-size:3.5vw;
                        font-weight:bold;
                    }
                    span.social{
                        width:100%;
                        margin-top:34px;
                        text-align:center;

                        .sbutton{
                            .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.75));
                            display:inline-block;
                            border-radius:3px;
                            margin: 10px 20px;
                            line-height:0;
                            vertical-align:middle;
                            i{
                                display:inline-block;
                            }
                            span{
                                display:inline-block;
                            }
                        }
                        .sbutton:hover{
                            opacity:.8;
                        }

                        .sbutton.fb-signin{
                            color:white;
                            background-color:@brand_facebook;
                            padding:8px 8px 8px 8px;
                            vertical-align:middle;
                            cursor:pointer;
                            line-height:0;
                            i{
                                overflow:hidden;
                                color:white;
                                font-size:22px;
                                margin-right:4px;
                            }
                            span{
                                padding: 0 10px;
                                display:inline-block;
                                overflow:hidden;
                                line-height:21px;
                                font-size:16px;
                            }
                        }

                        .sbutton.google-signin{
                            .box-sizing(border-box);
                            border:1px solid @brand_google_dark;
                            padding:0;
                            vertical-align:middle;
                            display:inline-block;
                            cursor:pointer;
                            line-height:0;
                            i{
                                background-position:center;
                                background-image:url('/img/google-logo.svg');
                                width:35px;
                                height:35px;
                                background-size:100%;
                                background-color:white;
                            }
                            span{
                                font-family: 'Roboto', sans-serif;
                                color:white;
                                background-color:@brand_google_dark;
                                padding: 0 10px;
                                display:inline-block;
                                overflow:hidden;
                                line-height:36px;
                                font-size:16px;
                            }
                        }
                        .sbutton.bookstolove{
                            font-family: @fancy_font;
                            border:1px solid @firebrick;

                            i{
                                overflow:hidden;
                                font-family: @fancy_font;
                                font-style:normal;
                                font-weight:bold;
                                font-size:24px;
                                font-weight:bold;
                                background-color:@firebrick;
                                color:white;
                                width:36px;
                                height:36px;
                                line-height:35px;
                            }
                            span{
                                font-family: @fancy_font;
                                font-weight:bold;
                                overflow:hidden;
                                padding: 0 10px;
                                overflow:hidden;
                                line-height:36px;
                                font-size:20px;
                                color: @firebrick;
                                background-color:white;
                            }

                        }
                    }


                }
/*
                .persuader{
                    position:absolute;
                    top:40px;
                    left:350px;
                    width:300px;
                    background-color:fade(white, 30%);
                    padding:33px 40px;
                    border-radius:10px;
                    span{
                        color:white;
                        display:block;
                        width:100%;
                        .box-sizing(border-box);
                        i{
                            height:40px;
                            width:40px;
                            display:inline-block;
                            text-align:center;
                            background-color:pink;
                            line-height:40px;
                            font-size:23px;
                            cursor:pointer;
                            overflow:hidden;
                            vertical-align:middle;
                            border-radius:2px;
                        }
                        i.fa-facebook{
                            background-color:@brand_facebook;
                        }
                        i.google-plus{
                            background-color:white;
                            background-image:url('/img/google-logo.svg');
                        }
                        i.bookstash{
                            border-radius:20px;
                            background-color:@firebrick;
                            font-family: @fancy_font;
                            font-style:normal;
                            font-size:32px;
                            line-height:40px;
                            .firebrick-text-shadow();
                        }
                        i:hover{
                            opacity:.8;
                        }
                    }
                    span.message{
                        font-size:18px;
                        text-shadow: 2px 1px 2px fade(black, 50%);
                        margin-left:30px;
                    }
                    span.social{
                        margin-top:20px;
                        margin-left:10px;
                        line-height:40px;
                        height:auto;
                        text-align:center;
                        strong{
                            text-shadow: 2px 1px 2px fade(black, 50%);
                            font-weight:normal;
                            padding-right:10px;
                        }
                    }
                }
*/
            }
            div.content.my-lists{
                .left{
                    position:absolute;
                    left:0;
                    width:180px;
                    top:2px;
                    bottom:0;
                    background-color:lighten(@slate, 20%);
                    padding-top:44px;
                    text-align:center;
                    color:white;
                    font-weight:bold;
                    text-shadow: 2px 1px 2px fade(black, 50%);
                    font-size:19px;
                    .user-avatar{
                        width:100px;
                        height:100px;
                        background-size:100px;
                        margin-bottom:12px;
                        border:1px solid #424242;
                    }
                }
                form{
                    display:block;
                    position:absolute;
                    left:180px;
                    top:0;
                    right:0;
                    bottom:0;
                    padding: 28px 0 0 40px;
                    ul{
                        list-style-type: none;
                        li{
                            display:inline-block;
                            input{
                                opacity:0;
                            }
                            label{
                                display:inline-block;
                                padding:20px 0 20px 50px;
                                width:200px;
                                background-color:lighten(@slate, 20%);
                                color:white;
                                font-weight:bold;
                                border-radius:4px;
                                margin-top:18px;
                                text-shadow: 2px 1px 2px fade(black, 50%);
                                .transition(.3s);
                            }
                            input[type="checkbox"]:checked + label{
                                box-shadow: inset 0px 0px 20px rgba(255,255,255, 0.55);
                            }
                            label:before{
                                left:23px;
                                top:21px;
                                border-color:@slate;
                            }
                            label:after{
                                left:28px;
                                top:20px;
                            }
                            label:hover{
                                background-color:lighten(@slate, 30%);
                            }
                        }
                        .status{
                            vertical-align:top;
                            margin-top:18px;
                            margin-left:17px;
                            padding-left:10px;
                            height:60px;
                            width:240px;
                            line-height:60px;
                            color:white;
                            i{
                                font-size:20px;
                                display:none;
                            }
                            span:before{
                                content:"Saved";
                                font-size:12px;
                                font-style:italic;
                                color:white;
                                opacity:0;
                                visibility:hidden;
                                text-shadow:none;
                                padding-right:5px;
                                .transition(~'3s opacity .4s linear, 3.4s visibility 0s linear');
                            }
                        }
                        .status[mode=saving]{
                            position:relative;
                            i{
                                display:inline-block;
                            }
                            span:before{
                                content:"Saving...";
                                .transition(~'opacity 0s linear, visibility 0s linear');
                                opacity:.8;
                                visibility:visible;
                            }
                        }
                        .status[mode=saved]{
                            span:before{
                                .transition(~'opacity 0s linear, visibility 0s linear');
                                opacity:.8;
                                visibility:visible;
                            }
                        }
                    }
                    .hint{
                        position:absolute;
                        bottom:20px;
                        left:20px;
                        color:white;
                        font-style: italic;
                        font-size:14px;
                        opacity:.8;
                        text-shadow: 2px 1px 2px fade(black, 50%);
                    }
                }
            }
            div.content.user-list{
                position:absolute;
                top:0;
                height:100%;
                width:100%;
                .controls{
                    position:absolute;
                    top:2px;
                    left:0;
                    width:180px;
                    height:100%;
                    background-color:lighten(@slate, 20%);
                    span.name{
                        display:block;
                        background-color:lighten(@slate, 20%);
                        height:43px;
                        padding-top:20px;
                        line-height:23px;
                        padding-left:30px;
                        .box-sizing(border-box);
                        em{
                            opacity:.8;
                            font-size:12px;
                            color:white;
                            .slate-text-shadow();
                        }
                    }
                    span.reverse{
                        display:block;
                        height:43px;
                        font-weight:bold;
                        color:white;
                        line-height:28px;
                        padding-left:33px;
                        text-shadow: 2px 1px 2px darken(@slate,0%);
                        background-color:lighten(@slate, 10%);
                        background-color:lighten(@slate, 20%);
                        form{
                            input{
                                cursor:pointer;
                                margin-top:4px;
                                opacity:.01;
                            }
                            label{
                                cursor:pointer;
                                font-size:13px;
                                //line-height:20px;
                            }
                            label:before{
                                cursor:pointer;
                                border-color:@slate;
                                height:14px;
                                width:14px;
                                top:1px;
                                left:-20px;
                            }
                            label:after{
                                top:-2px;
                                left:-17px;
                            }
                        }
                    }
                    button{
                        position:relative;
                        padding:10px;
                        padding-left:30px;
                        font-size:15px;
                        font-weight:bold;
                        background-color:lighten(@slate, 20%);
                        color:white;
                        width:180px;
                        text-align:left;
                        text-shadow: 2px 1px 2px darken(@slate,0%);
                    }
                    button.selected:before{
                        content:'\f0da';
                        position:absolute;
                        font:normal normal normal 16px/1 FontAwesome;
                        top:15px;
                        left:10px;
                    }
                    button:first-child{
                        border-top-left-radius: 5px;
                        border-top-right-radius: 5px;
                    }
                    button:last-child{
                        border-bottom-left-radius: 5px;
                        border-bottom-right-radius: 5px;
                    }
                    button.selected,
                    button:hover{
                        background-color:lighten(@slate, 10%);
                        .transition(.3s);
                        .slate-text-shadow();
                    }
                }
                .book-box{
                    position:absolute;
                    top:0;
                    left:0;
                    width:100%;
                    height:100%;
                    .box-sizing(border-box);
                    padding-left:260px;
                    .side-scroll{
                        position:absolute;
                        top:50px;
                        left:180px;
                        right:20px;
                        bottom:40px;
                        .pagination,
                        .page-data{
                            position:absolute;
                            top:-30px;
                            color:white;
                            font-size:12px;
                            text-shadow: 2px 1px 2px darken(@slate,0%);
                        }
                        .page-data{
                            left:40px;
                            opacity:.8;
                        }
                        .pagination{
                            right:20px;
                            button{
                                background-color:transparent;
                                color:white;
                                font-size:12px;
                                text-shadow: 2px 1px 2px darken(@slate,0%);
                                opacity:.8;
                            }
                            button:hover{
                                opacity:1;
                                text-decoration:underline;
                            }
                        }

                        .flowbox{
                            position:relative;
                            height:180px;

                            .book{
                                z-index:1;
                                position:absolute;
                                top:0;
                                .perspective(1000px);
                                transition: all .3s ease-out;
                                .box{
                                    position: relative;
                                    .transform-style(~"preserve-3d");
                                    .transition(~"all .3s ease-out");
                                    .transform(~"rotateY(60deg) scale(0.8, 0.8)");
                                    .shadowbehind{
                                        position:absolute;
                                        top:0;
                                        height:160px;
                                        .border-radius(2px);
                                        .box-shadow(4px 2px 23px rgba(0, 0, 0, 0.42));
                                        .transform(~"translateZ(-6px)");
                                    }
                                    .fcover{
                                        .perspective(1000px);
                                        .transform(~"translateZ(2px)");
                                    }
                                    .spine{
                                        position:absolute;
                                        top:0;
                                        width: 8px;
                                        text-align: right;
                                        background-color:black;
                                        margin-left:2px;
                                        .transform(~"rotateY(-90deg) translateZ(6px)");
                                        .perspective(1000px);
                                        overflow:hidden;
                                        img{
                                            margin-left:-10px;
                                            -webkit-filter: blur(8px);
                                            filter: blur(8px);
                                            opacity:.9;
                                        }
                                    }
                                    .shadowbelow{
                                        height:30px;
                                        .transform(~"rotateX( -90deg ) translateZ( 0px )");
                                        background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(117,117,117,.5)), color-stop(100%,rgba(117,117,117,0)));
                                        background: -webkit-radial-gradient(center, ellipse cover,  rgba(117,117,117,.5) 0%,rgba(117,117,117,0) 100%);
                                        background: -moz-radial-gradient(center, ellipse cover,  rgba(117,117,117,.5) 0%, rgba(117,117,117,0) 100%);
                                        background: -ms-radial-gradient(center, ellipse cover,  rgba(117,117,117,.5) 0%,rgba(117,117,117,0) 100%);
                                        background: -o-radial-gradient(center, ellipse cover,  rgba(117,117,117,.5) 0%,rgba(117,117,117,0) 100%);
                                        background: radial-gradient(ellipse at center,  rgba(70,70,70,.5) 0%,rgba(70,70,70,0) 100%);
                                        filter: blur(8px);
                                    }
                                }
                                .title-description{
                                    position:absolute;
                                    top:30px;
                                    text-align:center;
                                    font-size:12px;
                                    white-space: nowrap;
                                    .transform(~'translate(0,150px)');
                                    opacity:0;
                                    text-overflow: ellipsis;
                                    white-space: nowrap;
                                    overflow: hidden;
                                    .box-sizing(border-box);
                                    padding:0 20px;
                                    span{
                                        color:white;
                                        .slate-text-shadow();
                                    }
                                }
                            }
                        }

                        .flowbox:hover{
                            .book{
                                .box{
                                    .transform(~'translate(-30px,0) rotateY(60deg) scale(0.8, 0.8)');
                                }
                            }
                            .description{
                                opacity:0;
                            }
                        }
                        .flowbox{
                            .book:hover{
                                z-index:2;
                                .perspective(900px);
                                .box{
                                    .transform(~'translate(-0px,0)');
                                }
                                .title-description{
                                    opacity:1;
                                }
                            }
                            .book:hover ~ .book{
                                .box{
                                    .transform(~'translate(30px,0) rotateY(60deg) scale(0.8, 0.8)');
                                }
                            }
                        }

                        .title-info{
                        }
                    }
                    .empty-list{
                        padding-top:100px;
                        em{
                            font-size:13px;
                            color:white;
                            text-shadow: 2px 1px 2px darken(@slate,0%);
                            opacity:.7;
                        }
                    }
                }

            }
            div.content.loading{
                position:absolute;
                top:0;
                height:100%;
                width:100%;
                background-color:fade(#aaa, 10%);
                text-align:center;
                .progress{
                    margin-top:105px;
                    height:75px;
                    width:300px;
                    i{
                        background-color:fade(white, 20%);
                    }
                }
            }
        }
    }
    .user-tabs[data-mode=collapsed]{
        border-bottom-width:0;
        background: transparent;
        left:-100%;
        .minimal{
            display:block;
            opacity:1;
        }
    }
    .user-tabs[data-mode=expanded]{
        bottom:0;

        .tab.hide{
            button{
                .transform(~'rotate(270deg)');
            }
        }
    }

}
//- content ------------------------------------------------------------------
body {
    overflow:hidden;
    > .focus{
        position:fixed;
        display:block;
        overflow-y: scroll;
        top:0;
        bottom:0;
        left:0;
        right:0;
        background-color:rgba(228,228,228,.3);
        text-align:center;
        opacity:0;
        visibility:hidden;
        .cursor-zoom-out();
        *{
            cursor:default;
        }
        a, button{
            cursor:pointer;
            *{
                cursor:pointer;
            }
        }
        .transition(~"visibility 0s linear 0.2s, opacity 0.2s linear, tranform 0.2s ease");
        @import "section/404.less";
        @import "section/about.less";
        @import "section/admin.less";
        @import "section/blog.less";
        @import "section/password.less";
        @import "section/tos.less";
        @import "section/privacy.less";
        @import "section/test.less";
        @import "section/welcome.less";
        @import "section/work.less";
        @import "pickadate/base.less";
        @import "pickadate/base.date.less";
        @import "pickadate/classic.less";
        .close-button{
            position:fixed;
            top:20px;
            right:37px;
            width:50px;
            height:50px;
            background-color:@firebrick;
            color:white;
            cursor:pointer;
            font-size:30px;
            .border-radius(3px);
            .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.55));
            *{
                cursor:pointer;
            }
        }
        .close-button:hover{
            box-shadow: 1px 1px 14px rgba(50, 50, 50, 0.55), inset 0px 0px 8px rgba(255,255,255, 0.75);
        }
    }
    > .focus.visible{
        visibility:visible;
        opacity:1;
        .transition(opacity 0.2s linear);
    }
    > .alt-focus-bg{
        position:fixed;
        top:0;
        bottom:0;
        left:0;
        right:0;
        display:none;
        opacity:0;
        .bstsh-gradient();
    }
    > .browse.noscroll{
        overflow:hidden;
    }
    > .browse{
        display:block;
        overflow-y: scroll;
        width:auto;
        height:100%;
        .submenu{
            position:fixed;
            top:50px;
            height:0;
            width:100%;
            text-align:center;
            .search-description{
                white-space:nowrap;
                height:90px;
                display:inline-block;
                position:relative;
                margin-top:15px;
                text-align:left;
                background-color:white;
                border-radius:8px;
                .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.55));
                background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,rgba(255,244,244,0.2)), color-stop(26%,rgba(191,191,191,0.2)), color-stop(41%,rgba(137,137,137,0.2)), color-stop(100%,rgba(213,235,251,0.2)));
                background: -webkit-linear-gradient(-45deg,  rgba(255,244,244,0.2) 0%,rgba(191,191,191,0.2) 26%,rgba(137,137,137,0.2) 41%,rgba(213,235,251,0.2) 100%);
                background: linear-gradient(135deg,  rgba(255,244,244,0.2) 0%,rgba(191,191,191,0.2) 26%,rgba(137,137,137,0.2) 41%,rgba(213,235,251,0.2) 100%);
                background-color:fade(darken(@bright_blue, 20%), 95%);
                color:white;
                text-shadow: 2px 1px 2px darken(@bright_blue, 20%);
                img{
                    position:absolute;
                    border-radius:3px;
                    top:8px;
                    left:8px;
                }
                .details{
                    display:inline-block;
                    padding-top:5px;
                    padding-right:40px;
                    em{
                        font-size:80%;
                    }
                    a{
                        color:white;
                    }
                    strong{
                    }
                }
            }
        }
        .books{
            position:absolute;
            top:80px;
            left:0px;
            height:1000px;
            width:100%;
            .box-sizing(border-box);
            margin:0 auto;
            .item{
                position:relative;
                width:250px;
                height:auto;
                line-height:0;
                margin:10px;
                float:left;
                overflow:hidden;
                background-color: @menu_semi_grey;
                .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.75));
            }
            .item[anim=anim]{
                -webkit-transition: all 0.4s;
                -moz-transition: all 0.4s;
                -ms-transition: all 0.4s;
                transition: all 0.4s;
            }
            .item[sly=sly]{
                opacity:.1;
                -webkit-transform: translateY(200px);
                -moz-transform: translateY(200px);
                transform: translateY(200px);
            }
            .item.book{
                .border-radius(4px);
                img{
                    width:250px;
                    height:auto;
                    .border-radius(4px);
                }
                a{
                    position:absolute;
                    display:block;
                    height:100%;
                    width:100%;
                    top:0;
                    left:0;
                    background-color:fade(black, 30%);
                    .box-shadow(inset 0px 0px 30px 0px rgba(30, 30, 30, 1));
                    opacity:0;
                    .transition(.3s);
                    .border-radius(4px);
                    background-image:url('/img/zoom-overlay.svgz');
                    background-repeat: no-repeat;
                    background-position: center;
                    background-size:1px 1px;
                }
                a:hover{
                    opacity:1;
                    background-size:100px 100px;
                }
            }
            .item.news.rating{
                .border-radius(4px);
                div.cover{
                    position:relative;
                    img.cover{
                        border-bottom:1px solid #ccc;
                    }
                    a{
                        position:absolute;
                        display:block;
                        height:100%;
                        width:100%;
                        top:0;
                        left:0;
                        background-color:fade(black, 30%);
                        .box-shadow(inset 0px 0px 30px 0px rgba(30, 30, 30, 1));
                        opacity:0;
                        .transition(.3s);
                        .border-radius(4px);
                        background-image:url('/img/zoom-overlay.svgz');
                        background-repeat: no-repeat;
                        background-position: center;
                        background-size:1px 1px;
                    }
                    a:hover{
                        opacity:1;
                        background-size:100px 100px;
                    }
                }
                .bottom{
                    height:72px;
                    background-color:#eee;
                    div.user{
                        position:relative;
                        padding:10px 0 0 75px;
                        line-height:22px;
                        img.avatar{
                            position:absolute;
                            top:10px;
                            left:10px;
                            border-radius:2px;
                            height:50px;
                            width:50px;
                            border:1px solid #ccc;
                        }
                        strong{
                            text-transform:uppercase;
                            color:@slate;
                            font-size:12px;
                            letter-spacing: 0.2em;
                        }
                        span{
                            color:@firebrick;
                        }
                    }
                }
            }
            .item.news.review{
                .border-radius(4px);
                div.cover{
                    position:relative;
                    img.cover{
                        border-bottom:1px solid #ccc;
                    }
                    a{
                        position:absolute;
                        display:block;
                        height:100%;
                        width:100%;
                        top:0;
                        left:0;
                        background-color:fade(black, 30%);
                        .box-shadow(inset 0px 0px 30px 0px rgba(30, 30, 30, 1));
                        opacity:0;
                        .transition(.3s);
                        .border-radius(4px);
                        background-image:url('/img/zoom-overlay.svgz');
                        background-repeat: no-repeat;
                        background-position: center;
                        background-size:1px 1px;
                    }
                    a:hover{
                        opacity:1;
                        background-size:100px 100px;
                    }
                }
                .bottom{
                    height:102px;
                    background-color:#eee;
                    div.user{
                        position:relative;
                        padding:10px 0 0 75px;
                        line-height:22px;
                        height:72px;
                        .box-sizing(border-box);
                        img.avatar{
                            position:absolute;
                            top:10px;
                            left:10px;
                            border-radius:2px;
                            height:50px;
                            width:50px;
                            border:1px solid #ccc;
                        }
                        strong{
                            text-transform:uppercase;
                            color:@slate;
                            font-size:12px;
                            letter-spacing: 0.2em;
                        }
                        span{
                            color:@firebrick;
                        }
                    }
                    div.title{
                        height:30px;
                        padding:0 10px;
                        line-height:20px;
                        span{
                            display:inline-block;
                            font-style: italic;
                            font-size:12px;
                            color:lighten(@slate, 10%);
                            max-width: 220px;
                            white-space: nowrap;
                            overflow: hidden;
                            text-overflow: ellipsis;
                        }
                        span:before{
                            content:'\201C';
                        }
                        span:after{
                            content:'\201D';
                        }
                    }
                }
            }
            .item.news.comment{
                .border-radius(4px);
                width:250px;
                .head{
                    background-color:@firebrick;
                    color:white;
                    font-size:24px;
                    line-height:30px;
                    padding: 15px 0 10px 20px;
                    a{
                        font-family: @fancy_font;
                        font-size:28px;
                        color:white;
                        text-shadow: 2px 1px 2px darken(@firebrick,10%);
                    }
                }
                .body{
                    .commented{
                        position:relative;
                        line-height:30px;
                        padding:10px 0 0 0;
                        min-height:52px;
                        img.avatar{
                            position:absolute;
                            top:10px;
                            left:10px;
                            border-radius:2px;
                            height:50px;
                            width:50px;
                            border:1px solid #ccc;
                        }
                        strong{
                            display:inline-block;
                            padding-left:73px;
                            padding-top:3px;
                            height:58px;
                            text-transform:uppercase;
                            color:@slate;
                            font-size:12px;
                            letter-spacing: 0.2em;
                            line-height:24px;
                        }
                        .text{
                            padding:10px;
                            font-style: italic;
                            color:#777;
                            line-height:15px;
                            font-size:12px;
                            border-top:1px solid #bbb;
                        }
                        .out{
                            height:30px;
                            width:230px;
                            padding-right:10px;
                            text-transform:uppercase;
                            color:@slate;
                            font-size:12px;
                            text-align:right;
                            line-height:30px;
                            a{
                                text-align:right;
                                color:@slate;
                                display:inlin-block;
                                float:right;
                            }
                        }
                    }
                    .replied{
                        position:relative;
                        .users{
                            position:relative;
                            height:97px;
                            .user{
                                position:absolute;
                                top:10px;
                                height:80px;
                                width:90px;
                                text-align:center;
                                text-transform:uppercase;
                                line-height:18px;
                                font-size:12px;
                                font-weight:bold;
                                letter-spacing: 0.2em;
                                color:@slate;
                                img.avatar{
                                    height:50px;
                                    width:50px;
                                    border:1px solid #ccc;
                                }
                            }
                            .comment-user{
                                left:0;
                            }
                            .parent-user{
                                right:0;
                            }
                            strong{
                                display:block;
                                height:20px;
                                position:absolute;
                                top:24px;
                                width:100%;
                                line-height:20px;
                                text-align:center;
                                text-transform:uppercase;
                                line-height:17px;
                                font-size:12px;
                                letter-spacing: 0.2em;
                                color:@slate;
                            }

                        }
                        .text{
                            padding:10px;
                            font-style: italic;
                            color:#777;
                            line-height:15px;
                            font-size:12px;
                            border-top:1px solid #bbb;
                        }
                        .out{
                            height:30px;
                            line-height:30px;
                            width:230px;
                            padding-right:10px;
                            text-transform:uppercase;
                            color:@slate;
                            font-size:12px;
                            text-align:right;
                            a{
                                text-align:right;
                                color:@slate;
                            }
                        }
                    }
                }
            }
            .item.news{
                a.over{
                    position:absolute;
                    top:56px;
                    left:0;
                    right:0;
                    bottom:0;
                    background:fade(black, 10%);
                    opacity:0;
                }
                a.over:hover{
                    opacity:1;
                }
            }
            .item.news.post{
                .border-radius(4px);
                width:520px;
                .head{
                    background-color:@firebrick;
                    color:white;
                    font-size:24px;
                    line-height:30px;
                    font-weight:bold;
                    padding: 15px 0 10px 20px;
                    a{
                        font-family: @fancy_font;
                        font-size:28px;
                        color:white;
                        text-shadow: 2px 1px 2px darken(@firebrick,10%);
                    }
                }
                .blog-image{
                    position:relative;
                    a.over{
                        position:absolute;
                        top:0;
                        left:0;
                        right:0;
                        bottom:0;
                        background:fade(black, 10%);
                        opacity:0;
                    }
                    a.over:hover{
                        opacity:1;
                    }
                    .bottom{
                        position:absolute;
                        bottom:0;
                        left:0;
                        right:0;
                        height:50px;
                        padding:10px;
                        background-color:fade(white, 80%);
                        .user{
                            img.avatar{
                                height:50px;
                                width:50px;
                                border:1px solid #ccc;
                            }
                        }
                        .info{
                            position:absolute;
                            bottom:10px;
                            left:70px;
                            text-transform: uppercase;
                            color: #444444;
                            font-size: 12px;
                            letter-spacing: 0.2em;
                            line-height: 24px;
                            font-weight:bold;
                        }
                        .title{
                            position:absolute;
                            bottom:0;
                            right:0;
                            height:60px;
                            padding:10px 20px 0 0;
                            width:300px;
                            text-align:right;
                            line-height:24px;
                            font-weight:bold;
                            color:darken(@slate, 10%);
                        }
                    }
                }
                .blog-image:hover{
                    .bottom{
                        .title{
                            text-decoration:underline;
                        }
                    }
                }
            }
            .item.double{
            }
            .item.category{
                line-height:22px;
                border-top-right-radius: 4px;
                border-bottom-right-radius: 4px;
                background-color:fade(white, 80%);
                .current{
                    position:relative;
                    font-size:13px;
                    padding:10px 10px 20px 30px;
                    .flourish{
                        position: absolute;
                        top: 0;
                        left: 0;
                        bottom: 0;
                        width: 20px;
                        background-color:@link_blue;
                    }
                    span{
                        margin-left:25px;
                        padding-bottom:10px;
                        display:inline-block;
                        font-weight:bold;
                        color:@slate;
                    }
                    blockquote{
                        margin-left:20px;
                        a{
                            font-weight:bold;
                        }
                        a:before{
                            display:inline-block;
                            vertical-align:top;
                            height:20px;
                            line-height:20px;
                            content: "\f149";
                            font: normal normal normal 14px/1 FontAwesome;
                            margin:3px 5px 0 10px;
                            .transform(~'rotate(90deg) scaleY(-1)');
                        }
                    }
                }
            }
            .item-stuck{
                width:250px;
                background-color:white;
                position:absolute;
                top:10px;
                right:10px;
                .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.75));
                .border-radius(4px);
                margin-bottom:10px;
                .box-sizing(border-box);
                font-size:13px;
                .bstsh-gradient-light(80%);
                .item-stuck-wrap{
                    padding: 10px 0 10px 25px;
                    position:relative;
                    .flourish{
                        position: absolute;
                        top: 0;
                        left: 0;
                        bottom: 0;
                        width: 20px;
                        background-color:@link_blue;
                    }
                    strong, a{
                        display:block;
                        height:20px;
                        font-weight:bold;
                    }
                    strong{
                        padding-bottom:10px;
                        padding-left:10px;
                    }
                    a{
                    }
                    a:before{
                        display: inline-block;
                        vertical-align: top;
                        height: 20px;
                        line-height: 20px;
                        content: "\f178";
                        font: normal normal normal 14px/1 FontAwesome;
                        margin: 3px 5px 0 10px;
                    }
                }
            }
        }
        .no-results{
            width:800px;
            padding:100px;
            text-align:center;
            border-radius:20px;
            margin:200px auto 400px auto;
            background-color:fade(white, 80%);
            color:@slate;
        }
        .search-footer{
            font-size:90%;
            width:100%;
            height:100px;
            margin-top:200px;
            color:white;
            text-align:center;
            em{
                display:inline-block;
                opacity:.8;
                padding:20px 40px;
                border:1px solid rgba(255,255,255,.5);
                border-radius:10px;
                margin-bottom:150px;
            }
            p{
                display:inline-block;
                padding: 20px 40px 100px 40px;
                border-radius:20px;
                margin-bottom:10px;
                opacity:.8;
            }
        }
    }
}
body[pagename=book]{
    > .focus{
        background-color:rgba(228,228,228,.5);
    }
    > .alt-focus-bg{
        display:block;
        opacity:.7;
    }
}
// ----------------------------------------------------------------------------
@import "section/login.less";
// ----------------------------------------------------------------------------
// Modal
body > #modalGeneral{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background-color:rgba(0,0,0,.5);
    visibility:hidden;
    text-align:center;
    vertical-align:middle;
    text-shadow: 2px 1px 2px darken(@firebrick, 15%);
    z-index:200;
    .noselect();
    .message{
        position:relative;
        min-width:400px;
        padding:30px 30px 70px 30px;
        background-color:@firebrick;
        color:white;
        font-weight:bold;
        display:inline-block;
        vertical-align:middle;
        .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.75));
        .border-radius(3px);
        span.big{
            font-size:24px;
            margin-bottom:10px;
        }
         p{
        }
        .form-body{
            padding:20px 20px 0 20px;
            text-align:left;
            display:none;
            blockquote{
                padding-left:30px;
            }
            label{
                cursor:pointer;
            }
            label:hover{
                background-color:fade(white, 10%);
            }
            .reason-text{
                line-height:0px;
                textarea{
                    margin-top:25px;
                    margin-bottom:25px;
                    border:1px solid @slate;
                    width:400px;
                    max-width:400px;
                    height:90px;
                    padding:5px;
                    .border-radius(3px);
                    .transition(~"all 0.2s linear");
                    opacity:.8;
                }
                textarea:hover, textarea:focus{
                    opacity:1;
                }
                textarea.hidden{
                    height:0;
                    padding:0;
                    opacity:0;
                    margin:0;
                }
                .text-nag{
                    height:0px;
                    margin-left:10px;
                    margin-right:10px;
                    .border-radius(3px);
                    overflow:hidden;
                    padding-left:4px;
                    .transition(~"all 0.3s ease-in-out");
                    background-color:white;
                    line-height:22px;
                }
                .text-nag.visible{
                    margin-top:-10px;
                    height:24px;
                    background-color:fade(white, 20%);
                }
            }
            input[type="radio"] + label.magic:before {
                border: 2px solid darken(@firebrick, 20%);
                left:-25px;
                top:2px;
                height:20px;
                width:20px;
                .box-sizing(border-box);
            }
            input[type="radio"] + label.magic:after {
                background-color:darken(@firebrick, 20%);
                left:-19px;
                top:8px;
                height:8px;
                width:8px;
                .box-sizing(border-box);
            }
            label.magic{
                .border-radius(3px);
                padding-right:4px;
                padding-left:4px;
                margin-left:4px;

            }
            input[type="radio"]:checked + label.magic{
                text-decoration:none;
                background-color:fade(white, 20%);
            }
        }
        .pad{
            height:20px;
        }
        .control{
            position:absolute;
            bottom:30px;
            right:30px;
            text-align:center;
            .progress{
                visibility:hidden;
                opacity:.8;
                height:17px;
                width:68px;
                i{
                    background-color:white;
                }
            }
            button{
                padding: 5px 10px;
                .border-radius(3px);
                font-weight:bold;
                font-size:20px;
            }
            button:hover{
                text-decoration:underline;
            }
            button.cancel{
                color:white;
                background-color:@firebrick;
                margin-right:20px;
            }
            button.confirm{
                color:white;
                background-color:lighten(@firebrick, 10%);
                text-shadow: 2px 1px 2px @firebrick;
            }
            button.confirm:hover{
                text-decoration:underline;
                .box-shadow(inset 0px 0px 8px rgba(255,255,255, 0.75));
            }
        }
    }
    .nag{
        margin-left:24px;
        padding-left:4px;
        .border-radius(3px);
        height:0px;
        overflow:hidden;
        .transition(~"all 0.3s ease-in-out");
        background-color:white;
    }
    .nag.visible{
        margin-top:10px;
        height:24px;
        background-color:fade(white, 20%);
    }
}
body > #modalGeneral[active=active]{
    visibility:visible;
}
body > #modalGeneral[mode=alert]{
    .message{
        .control{
            button.cancel{
                display:none;
            }
            button.confirm{
                padding:5px 30px;
            }
        }
    }
}
body > #modalGeneral[mode=confirm]{
    .message{
        span.big{
            text-align:left;
            padding-left:120px;
            margin-top:10px;
        }
        span.big:before{
            position:absolute;
            top:30px;
            left:40px;
            content: "\f059";
            font: normal normal normal 100px/1 FontAwesome;
            color:white;
            opacity:.8;
        }
        p{
            text-align:left;
            padding-left:120px;
        }
        .pad{
            margin-top:40px;
        }
        .control{
            button.confirm{
                padding:5px 30px;
            }
        }
    }
}
body > #modalGeneral[mode=form]{
    .message{
        .form-body{
            display:block;
        }
        .control{
        }
    }
}



// ----------------------------------------------------------------------------
// MISC TRIM
body > .backtotop{
    position:fixed;
    top:80px;
    right:-100px;
    width:50px;
    height:50px;
    padding: 8px 0 8px 8px;
    .transition(~"right 0.2s linear");
    overflow:hidden;
    a{
        opacity:0;
        display:block;
        width:50px;
        height:50px;
        color:white;
        line-height:20px;
        background-color:@firebrick;
        text-align:center;
        border-top-left-radius: 3px;
        border-bottom-left-radius: 3px;
        .box-shadow(1px 1px 14px rgba(50, 50, 50, 0.75));
        .transition(~" opacity 0.2s linear");
        i{
            margin-top:10px;
        }
        span{
            display:block;
            font-weight:bold;
            line-height:14px;
        }
    }
    a:hover, a:active{
        text-decoration:none;
    }
}
body > .backtotop.visible a{
    opacity:.8;
}
body > .backtotop a:hover{
    box-shadow: 1px 1px 14px rgba(50, 50, 50, 0.55), inset 0px 0px 8px rgba(255,255,255, 0.75);
    opacity:1;
}
body[data-bstsh-mode=focus] > .backtotop a{
    opacity:0;
}
body[data-bstsh-mode=browse]{
    .force-hide-on-browse{
        display:none!important;
    }
}

// -----------------------------------------------------------------------------

.masonry,
.masonry .masonry-brick {
  -webkit-transition-duration: 0.7s;
     -moz-transition-duration: 0.7s;
      -ms-transition-duration: 0.7s;
       -o-transition-duration: 0.7s;
          transition-duration: 0.7s;
}

.masonry {
  -webkit-transition-property: height, width;
     -moz-transition-property: height, width;
      -ms-transition-property: height, width;
       -o-transition-property: height, width;
          transition-property: height, width;
}

.masonry .masonry-brick {
  -webkit-transition-property: left, right, top;
     -moz-transition-property: left, right, top;
      -ms-transition-property: left, right, top;
       -o-transition-property: left, right, top;
          transition-property: left, right, top;
}



