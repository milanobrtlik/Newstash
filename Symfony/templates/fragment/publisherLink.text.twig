{% spaceless %}
    {% if edition.isbn %}

        {% set slug %}{{ edition.slug|default('book-link')}}{% endset %}
        {% set isbn = edition.isbn %}
        {% set publisher = edition.publisher %}

        {% if null == publisher %}
        {% elseif 'Hachette Book Group' == publisher.name %} 
            {% if edition.url %}
                {{ edition.url }}
            {% else %}
                http://www.hachettebookgroup.com/titles/author/{{ slug }}/{{ isbn }}/
            {% endif %}
        {% elseif 'HarperCollins Publishers' == publisher.name %} 
            {% if edition.url %}
                {{ edition.url }}
            {% else %}
                http://www.harpercollins.com/books/{{ slug }}/?isbn={{ isbn }} 
            {% endif %}
        {% elseif 'Macmillan Publishers' == publisher.name %} 
            {% if edition.url %}
                {{ edition.url }}
            {% else %}
                http://us.macmillan.com/book.aspx?isbn={{ isbn }}
            {% endif %}
        {% elseif 'Penguin Group' == publisher.name %} 
            {% if edition.url %}
                {{ edition.url }}
            {% else %}
                http://www.penguin.com/book/{{ slug }}/{{ isbn }}
            {% endif %}
{#
        {% elseif 'Random House Inc.' == publisher.name %}
            {% if edition.url %}
                {{ edition.url }}
            {% else %}
                http://www.randomhouse.com/book/search/search.php?isbn={{ isbn }}
            {% endif %}
#}
        {% elseif 'Simon & Schuster' == publisher.name %} 
            {% if edition.url %}
                {{ edition.url }}
            {% else %}
                http://books.simonandschuster.com/{{ slug }}/author/{{ isbn }}
            {% endif %}
        {% else %}
            {% if edition.url %}
                {{ edition.url }}
            {% endif %}
        {% endif %}
    {% endif %}
{% endspaceless %}
